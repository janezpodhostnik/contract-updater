{
    "f_type": "InteractionTemplate",
    "f_version": "1.1.0",
    "id": "84a06f168ce1d86be3f2219d1e58fda905afbd5a55d6cc905d9e5173f0c228ab",
    "data": {
        "type": "transaction",
        "interface": "",
        "messages": null,
        "cadence": {
            "body": "#allowAccountLinking\n\nimport \"MetadataViews\"\n\nimport \"StagedContractUpdates\"\n\n/// Configures an Updater resource, assuming signing account is the account with the contract to update. This demos a\n/// simple case where the signer is the deployment account and deployment only includes a single contract.\n///\ntransaction(blockHeightBoundary: UInt64?, contractName: String, code: String) {\n\n    prepare(signer: AuthAccount) {\n\n        // Ensure Updater has not already been configured at expected path\n        // Note: If one was already configured, we'd want to load \u0026 destroy, but such action should be taken explicitly\n        if signer.type(at: StagedContractUpdates.UpdaterStoragePath) != nil {\n            panic(\"Updater already configured at expected path!\")\n        }\n        // Continue configuration...\n\n        let accountCapPrivatePath: PrivatePath = /private/StagedContractUpdatesAccountCap\n        let hostPrivatePath: PrivatePath = /private/StagedContractUpdatesHost\n\n        // Setup Capability on underlying signing host account\n        if !signer.getCapability\u003c\u0026AuthAccount\u003e(accountCapPrivatePath).check() {\n            signer.unlink(accountCapPrivatePath)\n            signer.linkAccount(accountCapPrivatePath)\n        }\n        let accountCap = signer.getCapability\u003c\u0026AuthAccount\u003e(accountCapPrivatePath)\n\n        // Setup Host resource, wrapping the previously configured account capabaility\n        if signer.type(at: StagedContractUpdates.HostStoragePath) == nil {\n            signer.save(\n                \u003c- StagedContractUpdates.createNewHost(accountCap: accountCap),\n                to: StagedContractUpdates.HostStoragePath\n            )\n        }\n        if !signer.getCapability\u003c\u0026StagedContractUpdates.Host\u003e(hostPrivatePath).check() {\n            signer.unlink(hostPrivatePath)\n            signer.link\u003c\u0026StagedContractUpdates.Host\u003e(hostPrivatePath, target: StagedContractUpdates.HostStoragePath)\n        }\n        let hostCap = signer.getCapability\u003c\u0026StagedContractUpdates.Host\u003e(hostPrivatePath)\n\n        // Create Updater resource, assigning the contract .blockUpdateBoundary to the new Updater\n        signer.save(\n            \u003c- StagedContractUpdates.createNewUpdater(\n                blockUpdateBoundary: blockHeightBoundary ?? StagedContractUpdates.blockUpdateBoundary,\n                hosts: [hostCap],\n                deployments: [[\n                    StagedContractUpdates.ContractUpdate(\n                        address: signer.address,\n                        name: contractName,\n                        code: code\n                    )\n                ]]\n            ),\n            to: StagedContractUpdates.UpdaterStoragePath\n        )\n        signer.unlink(StagedContractUpdates.UpdaterPublicPath)\n        signer.link\u003c\u0026{StagedContractUpdates.UpdaterPublic, MetadataViews.Resolver}\u003e(\n            StagedContractUpdates.UpdaterPublicPath,\n            target: StagedContractUpdates.UpdaterStoragePath\n        )\n    }\n}\n",
            "network_pins": []
        },
        "dependencies": [
            {
                "contracts": [
                    {
                        "contract": "MetadataViews",
                        "networks": [
                            {
                                "network": "mainnet",
                                "address": "0x1d7e57aa55817448",
                                "dependency_pin_block_height": 72002368,
                                "dependency_pin": {
                                    "pin": "48cdb16fa01e24bc986b68c33e8f196dfbdb48dc93ff11cf7689c4a90dbe345e",
                                    "pin_self": "16312239523708c4413ecd508ae41c5c7075949b1c07ac42c3ac0027f72bdbf5",
                                    "pin_contract_name": "MetadataViews",
                                    "pin_contract_address": "0x1d7e57aa55817448",
                                    "imports": [
                                        {
                                            "pin": "ac0208f93d07829ec96584d618ddbec6af3cf4e2866bd5071249e8ec93c7e0dc",
                                            "pin_self": "cdadd5b5897f2dfe35d8b25f4e41fea9f8fca8f40f8a8b506b33701ef5033076",
                                            "pin_contract_name": "FungibleToken",
                                            "pin_contract_address": "0xf233dcee88fe0abe",
                                            "imports": []
                                        },
                                        {
                                            "pin": "b2ab6c499be905685f1b34cfd0e6fb5740be90421589a9a230bc6b193d813b74",
                                            "pin_self": "dde9cd040a14d91d43fd551f92199bfa8742811c293446ea950fa4f5f0543404",
                                            "pin_contract_name": "NonFungibleToken",
                                            "pin_contract_address": "0x1d7e57aa55817448",
                                            "imports": []
                                        }
                                    ]
                                }
                            },
                            {
                                "network": "testnet",
                                "address": "0x631e88ae7f1d7c20",
                                "dependency_pin_block_height": 156134238,
                                "dependency_pin": {
                                    "pin": "22f424750f179e097ef1e36dc0c032e6b923f1c68d654e39a7788f3f322bd58c",
                                    "pin_self": "2ea8816094f91e7df89f254a3523bca39604f933d185ba8535070158afe5af3c",
                                    "pin_contract_name": "MetadataViews",
                                    "pin_contract_address": "0x631e88ae7f1d7c20",
                                    "imports": [
                                        {
                                            "pin": "ac0208f93d07829ec96584d618ddbec6af3cf4e2866bd5071249e8ec93c7e0dc",
                                            "pin_self": "cdadd5b5897f2dfe35d8b25f4e41fea9f8fca8f40f8a8b506b33701ef5033076",
                                            "pin_contract_name": "FungibleToken",
                                            "pin_contract_address": "0x9a0766d93b6608b7",
                                            "imports": []
                                        },
                                        {
                                            "pin": "b2ab6c499be905685f1b34cfd0e6fb5740be90421589a9a230bc6b193d813b74",
                                            "pin_self": "dde9cd040a14d91d43fd551f92199bfa8742811c293446ea950fa4f5f0543404",
                                            "pin_contract_name": "NonFungibleToken",
                                            "pin_contract_address": "0x631e88ae7f1d7c20",
                                            "imports": []
                                        }
                                    ]
                                }
                            },
                            {
                                "network": "emulator",
                                "address": "0xf8d6e0586b0a20c7",
                                "dependency_pin_block_height": 0
                            }
                        ]
                    }
                ]
            },
            {
                "contracts": [
                    {
                        "contract": "StagedContractUpdates",
                        "networks": [
                            {
                                "network": "emulator",
                                "address": "0x3662306132306337",
                                "dependency_pin_block_height": 0
                            },
                            {
                                "network": "testing",
                                "address": "0x3030303030303037",
                                "dependency_pin_block_height": 0
                            }
                        ]
                    }
                ]
            }
        ],
        "parameters": [
            {
                "label": "blockHeightBoundary",
                "index": 0,
                "type": "UInt64?",
                "messages": []
            },
            {
                "label": "contractName",
                "index": 1,
                "type": "String",
                "messages": []
            },
            {
                "label": "code",
                "index": 2,
                "type": "String",
                "messages": []
            }
        ]
    }
}